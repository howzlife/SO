- if @purchase_order.status != "closed"
	= render :partial => "shared/header", :locals => {:title => "Purchase Order "+@purchase_order.number,:icon => "fa-list-alt"}
- else
	= render :partial => "shared/header", :locals => {:title => "Purchase Order "+@purchase_order.number,:icon => "fa-list-alt"}
.wrapper
	#purchaseorder.card.purchaseorder
		.purchaseorder-header.clear
			.purchaseorder-company
				= @company.name
			.purchaseorder-address
				=@company.name
				%br
				=@company.email
			.purchaseorder-from
				.text-label From
				=@company.name
				%br
				=@company.email
				.section
					.text-label Sent By
					= current_user.first_name
					= current_user.last_name
			.purchaseorder-number
				.text-label Purchase Order
				.number
					= @purchase_order.number
				.section
					.text-label Date
					.date
						=@purchase_order.date.strftime("%B #{@purchase_order.date.day.ordinalize}, %Y")
		.purchaseorder-vendor.clear
			.to
				.text-label Send To
			.vendor-select
				=@purchase_order.vendor.name
				%br
				- if !@purchase_order.vendor.contact.blank?
					Attention: #{@purchase_order.vendor.contact}
					%br
				- if !@purchase_order.vendor.email.blank?
					=@purchase_order.vendor.email
			.date-required
				.text-label Date Required
				.date-field
					=@purchase_order.date_required
		.purchaseorder-description
			.text-label Description
		.purchaseorder-input
			= simple_format(@purchase_order.description)
		.purchaseorder-deliverto.clear
			.to
				.text-label Ship To
			.deliverto-select
				-a = @purchase_order.address
				=a['name']
				%br
				= a["address"]["address_line_1"]
				%br
				- if a["address"]["address_line_2"] != ""
					= a["address"]["address_line_2"]
					%br
				= "#{a["address"]["city"]}, #{a["address"]["state"]}, #{a["address"]["zip"]}"
				%br
				Tel. #{a["telephone"]}
			.to
				.text-label Attention
			.deliverto-agent
				- if !@purchase_order.address.name.blank?
					= a['agent']
					
	.buttons.clear.purchaseorder-buttons
		- if @purchase_order.status == "draft"
			= link_to purchase_order_path, method: 'delete', class: 'btn btn-danger left' do
				%i.fa.fa-trash.fa-fw
				%span.text Discard
			= link_to edit_purchase_order_path(@purchase_order), class: 'btn btn-cancel' do
				%i.fa.fa-edit.fa-fw
				%span.text Edit
		= simple_form_for @purchase_order, html: { class: "form-email form-print status-"+@purchase_order.status}, url: purchase_order_path do |f|
			= button_tag(type: 'submit', :name => "status", :value => "open", class: "btn btn-edit show-print") do
				%i.fa.fa-print.fa-fw
				%span.text Print
			- if @purchase_order.status != "closed" && @purchase_order.archived != true && !@purchase_order.vendor.email.blank?
				= button_tag(type: 'submit', :name => "status", :value => "email", :data => { :confirm => 'Are you sure?' }, class: "btn btn-edit email") do
					%i.fa.fa-envelope-o.fa-fw
					%span.text Email

		= simple_form_for @purchase_order, url: purchase_order_path do |f|
			- if @purchase_order.status == "open" && @purchase_order.archived != true
				= button_tag(type: 'submit', :name => "status", :value => "closed", :data => { :confirm => 'Are you sure?' }, class: "btn btn-close") do
					%i.fa.fa-times.fa-fw
					%span.text Mark as Closed
			- if @purchase_order.status == "closed" && @purchase_order.archived != true			
				= button_tag(type: 'submit', :name => "status", :value => "open", :data => { :confirm => 'Are you sure?' }, class: "btn") do
					%i.fa.fa-times.fa-fw
					%span.text Mark as Open
			- if @purchase_order.archived != true && @purchase_order.status == "closed"
				= button_tag(type: 'submit', :name => "archived", :value => true, :data => { :confirm => 'Are you sure?' }, class: "btn btn-cancel") do
					%i.fa.fa-trash.fa-fw
					%span.text Archive Purchase Order
	.credits
		%p= 'Created with Swiftorders -- swiftorders.com'
